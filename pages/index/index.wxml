<!--index.wxml-->
<view class="page">
  <view class="nav">
    <view class="brand" bindtap="onTapBrand">
      <text class="brand-text">{{labels.brand}}</text>
    </view>
    <view class="nav-actions">
      <button size="mini" bindtap="onTapSearch">{{labels.search}}</button>
      <button size="mini" bindtap="onTapFavorites">{{labels.favorites}}</button>
      <button size="mini" bindtap="onToggleLang">{{lang === 'zh' ? 'EN' : '中文'}}</button>
    </view>
  </view>

  <scroll-view class="content" scroll-y="true">
    <swiper class="swiper" indicator-dots="true" autoplay="true" circular="true" interval="4000">
      <block wx:for="{{banners}}" wx:key="*this">
        <swiper-item>
          <image class="banner" mode="aspectFill" src="{{item}}"></image>
        </swiper-item>
      </block>
      <block wx:if="{{banners.length === 0}}">
        <swiper-item>
          <view class="banner-placeholder"></view>
        </swiper-item>
      </block>
    </swiper>

    <view class="section">
      <text class="section-title">{{labels.recommend}}</text>
      <block wx:if="{{recommended.length === 0 && !loading}}">
        <view class="empty">{{labels.empty}}</view>
      </block>
      <block wx:for="{{recommended}}" wx:key="id">
        <view class="card" data-id="{{item.id}}" bindtap="onTapProduct">
          <image class="cover" mode="aspectFill" src="{{item.coverImage}}"></image>
          <view class="content2">
            <view class="name-row">
              <text class="name">{{item.name}}</text>
              <text wx:if="{{item.favorited}}" class="fav">★</text>
            </view>
            <text class="brief">{{item.brief}}</text>
          </view>
        </view>
      </block>
      <view wx:if="{{loading}}" class="loading">{{labels.loading}}</view>
    </view>
  </scroll-view>

  <view class="fab" bindtap="onTapContact">
    <text class="fab-text">{{labels.contact}}</text>
  </view>
</view>
